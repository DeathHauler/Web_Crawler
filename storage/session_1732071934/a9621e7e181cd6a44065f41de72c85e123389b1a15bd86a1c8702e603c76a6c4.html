<html lang="en" op="item"><head><meta name="referrer" content="origin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" type="text/css" href="news.css?ykIaoHvQeNpS3UJN9n8I">
        <link rel="icon" href="y18.svg">
    <link rel="canonical" href="https://news.ycombinator.com/item?id=42188555"/>            <title>Using uv with PyTorch | Hacker News</title></head><body><center><table id="hnmain" border="0" cellpadding="0" cellspacing="0" width="85%" bgcolor="#f6f6ef">
        <tr><td bgcolor="#ff6600"><table border="0" cellpadding="0" cellspacing="0" width="100%" style="padding:2px"><tr><td style="width:18px;padding-right:4px"><a href="https://news.ycombinator.com"><img src="y18.svg" width="18" height="18" style="border:1px white solid; display:block"></a></td>
                  <td style="line-height:12pt; height:10px;"><span class="pagetop"><b class="hnname"><a href="news">Hacker News</a></b>
                            <a href="newest">new</a> | <a href="front">past</a> | <a href="newcomments">comments</a> | <a href="ask">ask</a> | <a href="show">show</a> | <a href="jobs">jobs</a> | <a href="submit" rel="nofollow">submit</a>            </span></td><td style="text-align:right;padding-right:4px;"><span class="pagetop">
                              <a href="login?goto=item%3Fid%3D42188555">login</a>
                          </span></td>
              </tr></table></td></tr>
<tr id="pagespace" title="Using uv with PyTorch" style="height:10px"></tr><tr><td><table class="fatitem" border="0">
        <tr class='athing submission' id='42188555'>
      <td align="right" valign="top" class="title"><span class="rank"></span></td>      <td valign="top" class="votelinks"><center><a id='up_42188555' href='vote?id=42188555&amp;how=up&amp;goto=item%3Fid%3D42188555'><div class='votearrow' title='upvote'></div></a></center></td><td class="title"><span class="titleline"><a href="https://docs.astral.sh/uv/guides/integration/pytorch/">Using uv with PyTorch</a><span class="sitebit comhead"> (<a href="from?site=astral.sh"><span class="sitestr">astral.sh</span></a>)</span></span></td></tr><tr><td colspan="2"></td><td class="subtext"><span class="subline">
          <span class="score" id="score_42188555">66 points</span> by <a href="user?id=charliermarsh" class="hnuser">charliermarsh</a> <span class="age" title="2024-11-19T21:59:10 1732053550"><a href="item?id=42188555">5 hours ago</a></span> <span id="unv_42188555"></span> | <a href="hide?id=42188555&amp;goto=item%3Fid%3D42188555">hide</a> | <a href="https://hn.algolia.com/?query=Using%20uv%20with%20PyTorch&type=story&dateRange=all&sort=byDate&storyText=false&prefix&page=0" class="hnpast">past</a> | <a href="fave?id=42188555&amp;auth=34dd9e724f4a6a8c4cb47913fb951a4073cbb190">favorite</a> | <a href="item?id=42188555">11&nbsp;comments</a>        </span>
              </td></tr>
            <tr><td style="height:10px"></td></tr><tr><td colspan="2"></td><td><form action="comment" method="post"><input type="hidden" name="parent" value="42188555"><input type="hidden" name="goto" value="item?id=42188555"><input type="hidden" name="hmac" value="b77525b5b5916ab45f648c18147e3ad867faa5f5"><textarea name="text" rows="8" cols="80" wrap="virtual"></textarea><br><br>
<input type="submit" value="add comment"></form></td></tr>  </table><br><br><table border="0" class='comment-tree'>
            <tr class='athing comtr' id='42190458'><td><table border='0'>  <tr>    <td class='ind' indent='0'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id='up_42190458' href='vote?id=42190458&amp;how=up&amp;goto=item%3Fid%3D42188555'><div class='votearrow' title='upvote'></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=thundergolfer" class="hnuser">thundergolfer</a> <span class="age" title="2024-11-20T02:57:54 1732071474"><a href="item?id=42190458">22 minutes ago</a></span> <span id="unv_42190458"></span>          <span class='navs'>
             | <a href="#42189027" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42190458" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Kind of an aside as this doc is about the complexities of installing particular PyTorch versions, but will say that uv is <i>way</i> faster at installing PyTorch than pip.<p>We run internal benchmarks of our custom container image builder and in the &#x27;install torch&#x27; benchmark the p50 time saved when using `uv` is 25 seconds! (71.4s vs. 43.74s)<p>---<p>Aside 2: Seems there&#x27;s a missing &quot;involves&quot; in this sentence:  &quot;As such, installing PyTorch typically often configuring a project to use the PyTorch index.&quot;</div>
              <div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=42190458&amp;goto=item%3Fid%3D42188555%2342190458" rel="nofollow">reply</a></u>
                  </font>
      </div></div></td></tr>
        </table></td></tr>
            <tr class='athing comtr' id='42189027'><td><table border='0'>  <tr>    <td class='ind' indent='0'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id='up_42189027' href='vote?id=42189027&amp;how=up&amp;goto=item%3Fid%3D42188555'><div class='votearrow' title='upvote'></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=gdiamos" class="hnuser">gdiamos</a> <span class="age" title="2024-11-19T23:06:45 1732057605"><a href="item?id=42189027">4 hours ago</a></span> <span id="unv_42189027"></span>          <span class='navs'>
             | <a href="#42190458" class="clicky" aria-hidden="true">prev</a> | <a href="#42188914" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42189027" n="6" href="javascript:void(0)">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">uv significantly speeds up my pytorch in docker builds<p><pre><code>  # Setup virtual env
  ENV VIRTUAL_ENV=&#x2F;app&#x2F;.venv
  ENV PATH=&quot;$VIRTUAL_ENV&#x2F;bin:$PATH&quot;
  RUN python3 -m venv $VIRTUAL_ENV
  RUN . $VIRTUAL_ENV&#x2F;bin&#x2F;activate

  # install using uv
  RUN pip install uv
  RUN uv pip install torch==${TORCH_VERSION} --index-url https:&#x2F;&#x2F;download.pytorch.org&#x2F;whl&#x2F;cpu
</code></pre>
The index-url makes it really convenient.</div>
              <div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=42189027&amp;goto=item%3Fid%3D42188555%2342189027" rel="nofollow">reply</a></u>
                  </font>
      </div></div></td></tr>
        </table></td></tr>
                <tr class='athing comtr' id='42190557'><td><table border='0'>  <tr>    <td class='ind' indent='1'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id='up_42190557' href='vote?id=42190557&amp;how=up&amp;goto=item%3Fid%3D42188555'><div class='votearrow' title='upvote'></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=ttyprintk" class="hnuser">ttyprintk</a> <span class="age" title="2024-11-20T03:20:12 1732072812"><a href="item?id=42190557">0 minutes ago</a></span> <span id="unv_42190557"></span>          <span class='navs'>
             | <a href="#42189027" class="clicky" aria-hidden="true">parent</a> | <a href="#42189326" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42190557" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Apparently, uv respects a key in project.toml:<p><pre><code>    [[tool.uv.index]]
    name = &quot;pytorch-cu124&quot;
    url = &quot;https:&#x2F;&#x2F;download.pytorch.org&#x2F;whl&#x2F;cu124&quot;
    explicit = true</code></pre></div>
              <div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=42190557&amp;goto=item%3Fid%3D42188555%2342190557" rel="nofollow">reply</a></u>
                  </font>
      </div></div></td></tr>
        </table></td></tr>
            <tr class='athing comtr' id='42189326'><td><table border='0'>  <tr>    <td class='ind' indent='1'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id='up_42189326' href='vote?id=42189326&amp;how=up&amp;goto=item%3Fid%3D42188555'><div class='votearrow' title='upvote'></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=orf" class="hnuser">orf</a> <span class="age" title="2024-11-19T23:48:40 1732060120"><a href="item?id=42189326">3 hours ago</a></span> <span id="unv_42189326"></span>          <span class='navs'>
             | <a href="#42189027" class="clicky" aria-hidden="true">parent</a> | <a href="#42190557" class="clicky" aria-hidden="true">prev</a> | <a href="#42189506" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42189326" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Use —copy-from to make it even faster, and use a cache mount<p><a href="https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;guides&#x2F;integration&#x2F;docker&#x2F;#installing-uv" rel="nofollow">https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;guides&#x2F;integration&#x2F;docker&#x2F;#install...</a></div>
              <div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=42189326&amp;goto=item%3Fid%3D42188555%2342189326" rel="nofollow">reply</a></u>
                  </font>
      </div></div></td></tr>
        </table></td></tr>
                <tr class='athing comtr' id='42190399'><td><table border='0'>  <tr>    <td class='ind' indent='2'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id='up_42190399' href='vote?id=42190399&amp;how=up&amp;goto=item%3Fid%3D42188555'><div class='votearrow' title='upvote'></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=odie5533" class="hnuser">odie5533</a> <span class="age" title="2024-11-20T02:46:28 1732070788"><a href="item?id=42190399">34 minutes ago</a></span> <span id="unv_42190399"></span>          <span class='navs'>
             | <a href="#42189027" class="clicky" aria-hidden="true">root</a> | <a href="#42189326" class="clicky" aria-hidden="true">parent</a> | <a href="#42189506" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42190399" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Also use pyproject.toml to specify dependencies, not manually installing stuff with uv pip</div>
              <div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=42190399&amp;goto=item%3Fid%3D42188555%2342190399" rel="nofollow">reply</a></u>
                  </font>
      </div></div></td></tr>
        </table></td></tr>
                  <tr class='athing comtr' id='42189506'><td><table border='0'>  <tr>    <td class='ind' indent='1'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id='up_42189506' href='vote?id=42189506&amp;how=up&amp;goto=item%3Fid%3D42188555'><div class='votearrow' title='upvote'></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=samtheprogram" class="hnuser">samtheprogram</a> <span class="age" title="2024-11-20T00:16:38 1732061798"><a href="item?id=42189506">3 hours ago</a></span> <span id="unv_42189506"></span>          <span class='navs'>
             | <a href="#42189027" class="clicky" aria-hidden="true">parent</a> | <a href="#42189326" class="clicky" aria-hidden="true">prev</a> | <a href="#42188914" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42189506" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Speeds up installation, or speeds up PyTorch in general?</div>
              <div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=42189506&amp;goto=item%3Fid%3D42188555%2342189506" rel="nofollow">reply</a></u>
                  </font>
      </div></div></td></tr>
        </table></td></tr>
                <tr class='athing comtr' id='42190362'><td><table border='0'>  <tr>    <td class='ind' indent='2'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id='up_42190362' href='vote?id=42190362&amp;how=up&amp;goto=item%3Fid%3D42188555'><div class='votearrow' title='upvote'></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=gleenn" class="hnuser">gleenn</a> <span class="age" title="2024-11-20T02:40:00 1732070400"><a href="item?id=42190362">40 minutes ago</a></span> <span id="unv_42190362"></span>          <span class='navs'>
             | <a href="#42189027" class="clicky" aria-hidden="true">root</a> | <a href="#42189506" class="clicky" aria-hidden="true">parent</a> | <a href="#42188914" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="42190362" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Almost certainly only the install. Uv is basically a pip tool substitute with a few other bells and whistles too but shouldn&#x27;t affect run time whatsoever.</div>
              <div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=42190362&amp;goto=item%3Fid%3D42188555%2342190362" rel="nofollow">reply</a></u>
                  </font>
      </div></div></td></tr>
        </table></td></tr>
                        <tr class='athing comtr' id='42188914'><td><table border='0'>  <tr>    <td class='ind' indent='0'><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks">
      <center><a id='up_42188914' href='vote?id=42188914&amp;how=up&amp;goto=item%3Fid%3D42188555'><div class='votearrow' title='upvote'></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=minimaxir" class="hnuser">minimaxir</a> <span class="age" title="2024-11-19T22:48:32 1732056512"><a href="item?id=42188914">4 hours ago</a></span> <span id="unv_42188914"></span>          <span class='navs'>
             | <a href="#42189027" class="clicky" aria-hidden="true">prev</a> <a class="togg clicky" id="42188914" n="4" href="javascript:void(0)">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">So uv caused a bit of an issue with me installing PyTorch over the weekend.<p>When installed with brew on my MacBook, uv currently has PyTorch 3.13 as a dependency, which is fine. But PyTorch does not currently have a stable wheel that&#x27;s compatable with Python 3.13! This resulted in very confusing errors. (Solution was to point to the Nightly index)<p>That&#x27;s technically PyTorch&#x27;s fault, but it&#x27;s indicitave why a specific page on installing PyTorch is necessary, and it&#x27;s good to know the documentation specifically calls it out.</div>
              <div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=42188914&amp;goto=item%3Fid%3D42188555%2342188914" rel="nofollow">reply</a></u>
                  </font>
      </div></div></td></tr>
        </table></td></tr>
                <tr class='athing comtr' id='42189345'><td><table border='0'>  <tr>    <td class='ind' indent='1'><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks">
      <center><a id='up_42189345' href='vote?id=42189345&amp;how=up&amp;goto=item%3Fid%3D42188555'><div class='votearrow' title='upvote'></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=0cf8612b2e1e" class="hnuser">0cf8612b2e1e</a> <span class="age" title="2024-11-19T23:51:32 1732060292"><a href="item?id=42189345">3 hours ago</a></span> <span id="unv_42189345"></span>          <span class='navs'>
             | <a href="#42188914" class="clicky" aria-hidden="true">parent</a> <a class="togg clicky" id="42189345" n="3" href="javascript:void(0)">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I have run into multiple package problems with 3.13 with a non obvious root cause error message. Thankfully, uv makes it trivial to switch out to 3.12</div>
              <div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=42189345&amp;goto=item%3Fid%3D42188555%2342189345" rel="nofollow">reply</a></u>
                  </font>
      </div></div></td></tr>
        </table></td></tr>
                <tr class='athing comtr' id='42189386'><td><table border='0'>  <tr>    <td class='ind' indent='2'><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks">
      <center><a id='up_42189386' href='vote?id=42189386&amp;how=up&amp;goto=item%3Fid%3D42188555'><div class='votearrow' title='upvote'></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=zanie" class="hnuser">zanie</a> <span class="age" title="2024-11-19T23:58:34 1732060714"><a href="item?id=42189386">3 hours ago</a></span> <span id="unv_42189386"></span>          <span class='navs'>
             | <a href="#42188914" class="clicky" aria-hidden="true">root</a> | <a href="#42189345" class="clicky" aria-hidden="true">parent</a> <a class="togg clicky" id="42189386" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">I work on our error messages, feel free to open an issue and we&#x27;ll do our best to make it clearer</div>
              <div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=42189386&amp;goto=item%3Fid%3D42188555%2342189386" rel="nofollow">reply</a></u>
                  </font>
      </div></div></td></tr>
        </table></td></tr>
                <tr class='athing comtr' id='42190377'><td><table border='0'>  <tr>    <td class='ind' indent='3'><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks">
      <center><a id='up_42190377' href='vote?id=42190377&amp;how=up&amp;goto=item%3Fid%3D42188555'><div class='votearrow' title='upvote'></div></a></center>    </td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead">
          <a href="user?id=emmanueloga_" class="hnuser">emmanueloga_</a> <span class="age" title="2024-11-20T02:42:36 1732070556"><a href="item?id=42190377">37 minutes ago</a></span> <span id="unv_42190377"></span>          <span class='navs'>
             | <a href="#42188914" class="clicky" aria-hidden="true">root</a> | <a href="#42189386" class="clicky" aria-hidden="true">parent</a> <a class="togg clicky" id="42190377" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span>          </span>
                  </span></div><br><div class="comment">
                  <div class="commtext c00">Hey there, I experienced a hairy error message recently too while trying to install aider-chat from pypi with Python 3.13 and Pixi (but I was told the error was coming from UV).<p>&quot;Solution&quot;: `pixi add python=3.12`, then `pixi add --pypi aider-chat` succeeds without issues.<p>A message like &quot;aider-chat seems to be incompatible with python=3.13, try downgrading to python-3.12&quot; would be great, assuming this is really the case.<p>I can create an issue if it helps, but really quick here&#x27;s the error I was getting and some talk on discord about it:<p><a href="https:&#x2F;&#x2F;pastebin.com&#x2F;UVkFstJH" rel="nofollow">https:&#x2F;&#x2F;pastebin.com&#x2F;UVkFstJH</a><p><a href="https:&#x2F;&#x2F;discord.com&#x2F;channels&#x2F;1082332781146800168&#x2F;1295723793100181555" rel="nofollow">https:&#x2F;&#x2F;discord.com&#x2F;channels&#x2F;1082332781146800168&#x2F;12957237931...</a></div>
              <div class='reply'>        <p><font size="1">
                      <u><a href="reply?id=42190377&amp;goto=item%3Fid%3D42188555%2342190377" rel="nofollow">reply</a></u>
                  </font>
      </div></div></td></tr>
        </table></td></tr>
                              </table>
  <br><br>
</td></tr>
<tr><td><img src="s.gif" height="10" width="0"><table width="100%" cellspacing="0" cellpadding="1"><tr><td bgcolor="#ff6600"></td></tr></table><br>
<center><span class="yclinks"><a href="newsguidelines.html">Guidelines</a> | <a href="newsfaq.html">FAQ</a> | <a href="lists">Lists</a> | <a href="https://github.com/HackerNews/API">API</a> | <a href="security.html">Security</a> | <a href="https://www.ycombinator.com/legal/">Legal</a> | <a href="https://www.ycombinator.com/apply/">Apply to YC</a> | <a href="mailto:hn@ycombinator.com">Contact</a></span><br><br>
<form method="get" action="//hn.algolia.com/">Search: <input type="text" name="q" size="17" autocorrect="off" spellcheck="false" autocapitalize="off" autocomplete="off"></form></center></td></tr>      </table></center></body>
      <script type='text/javascript' src='hn.js?ykIaoHvQeNpS3UJN9n8I'></script>
  </html>
